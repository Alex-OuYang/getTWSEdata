if(!("quantmod" %in% rownames(installed.packages()))){
install.packages("quantmod")
}
if(!("jsonlite" %in% rownames(installed.packages()))){
install.packages("jsonlite")
}
library(quantmod)
library(jsonlite)
stockFunc=function(stockno,datediff){
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
#print(stock)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,9])
STOCK=rbind(STOCK,STK)
Sys.sleep(sample(10, 1))
}
#print(stock)
STOCK[,2]=as.numeric(STOCK[,2])#O
STOCK[,3]=as.numeric(STOCK[,3])#P
STOCK[,4]=as.numeric(STOCK[,4])#C
STOCK[,5]=as.numeric(STOCK[,5])#L
STOCK[,6]=as.numeric(gsub(",","",STOCK[,6]))#V
Sys.setenv(TZ = "Asia/Taipei")
timeCharVector = as.character(STOCK[,1])
TimeY=substr(timeCharVector,1,3)
TimeY=as.numeric(TimeY)+1911
timeCharVector=paste0(TimeY,substr(timeCharVector,4,9))
timeVector=strptime(timeCharVector,"%Y/%m/%d",tz=Sys.timezone())
timeVector=as.POSIXct(timeVector)
STOCK=cbind(as.numeric(STOCK[,2]),as.numeric(STOCK[,3]),as.numeric(STOCK[,4]),as.numeric(STOCK[,5]),as.numeric(STOCK[,6]))
STOCK=xts(STOCK,as.POSIXct(timeVector))
colnames(STOCK)=c("Open","High","Low","Close","Volume")
return(STOCK)
}
View(STOCK)
View(stockFunc)
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
# Download Basic Data
isDownloadData=TRUE
source("GetCompanyList.R")
stocknolist=c(companylist)
stocknolist=c(companylist[8:length(companylist)])
stocknolist
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
isDownloadData=TRUE
source("GetCompanyList.R")
stocknolist=c(companylist)
stocknolist=c(companylist[1:length(companylist)])
stocknolist
# Show Basic Data
stockno="2330"
source("ShowBasicData.R")
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
# Show Basic Data
stockno="2330"
setwd(paste0(projectPathStr,"/BasicData") )
source("FuncDateDiff.R")
source("FuncGetStock.R")
datediff=datediffFunc(startDate = startDate,endDate = endDate)
datediff
STOCK=stockFunc(stockno = stockno,datediff = datediff)
rm(list=ls())
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200601"
endDate=nowDate
# Show Basic Data
stockno="2330"
setwd(paste0(projectPathStr,"/BasicData") )
source("FuncDateDiff.R")
source("FuncGetStock.R")
datediff=datediffFunc(startDate = startDate,endDate = endDate)
STOCK=stockFunc(stockno = stockno,datediff = datediff)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
# View(STOCK)
addBBands(n=20,sd=2,maType = "EMA")
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200501"
endDate=nowDate
# Download Basic Data
# source("GetCompanyList.R")
# stocknolist=c(companylist)
# stocknolist=c(companylist[1:length(companylist)])
# isDownloadData=TRUE
# source("DownloadBasicData.R")
# downloadData(stocknolist)
# Show Basic Data
stockno="2330"
source("ShowBasicData.R")
# Analysis
#source("BasicData.R")
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200501"
endDate=nowDate
# Download Basic Data
# source("GetCompanyList.R")
# stocknolist=c(companylist)
# stocknolist=c(companylist[1:length(companylist)])
# isDownloadData=TRUE
# source("DownloadBasicData.R")
# downloadData(stocknolist)
# Show Basic Data
stockno="6547"
source("ShowBasicData.R")
# Analysis
#source("BasicData.R")
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200601"
endDate=nowDate
# Download Basic Data
# source("GetCompanyList.R")
# stocknolist=c(companylist)
# stocknolist=c(companylist[1:length(companylist)])
# isDownloadData=TRUE
# source("DownloadBasicData.R")
# downloadData(stocknolist)
# Show Basic Data
stockno="6547"
source("ShowBasicData.R")
# Analysis
#source("BasicData.R")
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200601"
endDate=nowDate
# Download Basic Data
# source("GetCompanyList.R")
# stocknolist=c(companylist)
# stocknolist=c(companylist[1:length(companylist)])
# isDownloadData=TRUE
# source("DownloadBasicData.R")
# downloadData(stocknolist)
# Show Basic Data
stockno="2312"
source("ShowBasicData.R")
# Analysis
#source("BasicData.R")
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
# Download Basic Data
# source("GetCompanyList.R")
# stocknolist=c(companylist)
# stocknolist=c(companylist[1:length(companylist)])
# isDownloadData=TRUE
# source("DownloadBasicData.R")
# downloadData(stocknolist)
# Show Basic Data
stockno="2882"
source("ShowBasicData.R")
# Analysis
#source("BasicData.R")
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
# Download Basic Data
source("GetCompanyList.R")
stocknolist=c(companylist)
stocknolist=c(companylist[1:length(companylist)])
isDownloadData=TRUE
source("DownloadBasicData.R")
downloadData(stocknolist)
urldata
stock
c(companylist)
c("2330","2331")
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
stockno="2882"
source("ShowBasicData.R")
stockno="2882"
source("ShowBasicData.R")
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200401"
endDate=nowDate
# Download Basic Data
# source("GetCompanyList.R")
# get all company list
# stocknolist=c(companylist)
# stocknolist=c(companylist[1:length(companylist)])
# asign company list
# stocknolist=c("2330","2882")
# isDownloadData=TRUE
# source("DownloadBasicData.R")
# downloadData(stocknolist)
# Show Basic Data
stockno="2882"
source("ShowBasicData.R")
# addBBands(n=20,sd=2,maType = "EMA")
# addEMA(n=20,col = "blue")
# addEMA(n=60,col = "purple")
# Analysis
#source("BasicData.R")
STOCK
git
clear
install.packages("jsonlite")
install.packages("jsonlite")
install.packages("jsonlite")
install.packages("quantmod")
check.for.updates.R()
require(installr)
install.packages("installr")
require(installr)
check.for.updates.R()
install.R()
install.packages("installr")
require(installr)
check.for.updates.R()
version
if(!("installr" %in% rownames(installed.packages()))){
install.packages("installr")
}
require(installr)
if(check.for.updates.R()){
install.R()
}else{
version
}
install.packages("TTR")
if(!("installr" %in% rownames(installed.packages()))){
install.packages("installr")
}
require(installr)
check.for.updates.R()
install.packages(c("glue", "TTR"))
if(!("installr" %in% rownames(installed.packages()))){
install.packages("installr")
}
require(installr)
check.for.updates.R()
install.packages("TTR")
if(!("installr" %in% rownames(installed.packages()))){
install.packages("installr")
}
if(!("installr" %in% rownames(installed.packages()))){
install.packages("installr")
}
require(installr)
if(check.for.updates.R()){
install.R()
}else{
version
}
install.packages(c("jsonlite", "stringi", "xts"))
install.packages("xts")
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
stockno="2882"
source("ShowBasicData.R")
install.packages("xts")
if(!("installr" %in% rownames(installed.packages()))){
install.packages("installr")
}
require(installr)
check.for.updates.R()
if(check.for.updates.R()){
install.R()
}else{
version
}
if(check.for.updates.R()){
install.R()
}else{
version
}
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
# Show Basic Data
stockno="2882"
source("ShowBasicData.R")
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
# Show Basic Data
stockno="2882"
source("ShowBasicData.R")
setwd(paste0(projectPathStr,"/BasicData") )
source("FuncDateDiff.R")
source("FuncGetStock.R")
datediff=datediffFunc(startDate = startDate,endDate = endDate)
STOCK=stockFunc(stockno = stockno,datediff = datediff)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
# Show Basic Data
stockno="2882"
source("ShowBasicData.R")
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
source("FuncDateDiff.R")
setwd(paste0(projectPathStr,"/BasicData") )
source("FuncDateDiff.R")
source("FuncGetStock.R")
datediff=datediffFunc(startDate = startDate,endDate = endDate)
STOCK=stockFunc(stockno = stockno,datediff = datediff)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
addSMA(n=10,col="red")
if(!("installr" %in% rownames(installed.packages()))){
install.packages("installr")
}
require(installr)
if(check.for.updates.R()){
install.R()
}else{
version
}
if(check.for.updates.R()){
install.R()
}else{
version
}
if(!("installr" %in% rownames(installed.packages()))){
install.packages("installr")
}
require(installr)
if(check.for.updates.R()){
install.R()
}else{
version
}
rm(list=ls())
source("ShowBasicData.R")
source("ShowBasicData.R",encoding = "utf-8")
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
source("ShowBasicData.R",encoding = "utf-8")
source("ShowBasicData.R","r",encoding = "utf-8")
Sys.getlocale()
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
source("BasicData/ShowBasicData.R",encoding="utf-8")
setwd(paste0(projectPathStr,"/BasicData") )
source("FuncDateDiff.R")
source("FuncGetStock.R")
datediff=datediffFunc(startDate = startDate,endDate = endDate)
rm(list=ls())
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
stockno="2882"
source("BasicData/ShowBasicData.R",encoding="utf-8")
rm(list=ls())
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata/"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
stockno="2882"
source("BasicData/ShowBasicData.R",encoding="utf-8")
source("BasicData/ShowBasicData.R",encoding="utf-8")
source("/BasicData/ShowBasicData.R",encoding="utf-8")
setwd(paste0(projectPathStr,"/BasicData") )
source("FuncDateDiff.R")
source("FuncGetStock.R")
datediff=datediffFunc(startDate = startDate,endDate = endDate)
STOCK=stockFunc(stockno = stockno,datediff = datediff)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata/"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
# Show Basic Data
stockno="2882"
source("/BasicData/ShowBasicData.R",encoding="utf-8")
source("/BasicData/ShowBasicData.R",encoding="utf-8")
source("BasicData/ShowBasicData.R",encoding="utf-8")
source("BasicData/ShowBasicData.R",encoding="utf-8")
source("C:/Users/alex1/Desktop/getTWSEdata/BasicData/ShowBasicData.R",encoding="utf-8")
pathStr=paste0(projectPathStr,"BasicData/ShowBasicData.R")
pathStr
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata/"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata/"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
stockno="2882"
pathStr=paste0(projectPathStr,"BasicData/ShowBasicData.R")
source(pathStr,encoding="utf-8")
pathStr=paste0(projectPathStr,"BasicData/ShowBasicData.R")
rm(list=ls())
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata/"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
# Download Basic Data
# source("GetCompanyList.R")
# get all company list
# stocknolist=c(companylist)
# stocknolist=c(companylist[1:length(companylist)])
# asign company list
# stocknolist=c("2330","2882")
# isDownloadData=TRUE
# source("DownloadBasicData.R")
# downloadData(stocknolist)
# Show Basic Data
stockno="2882"
pathStr=paste0(projectPathStr,"BasicData/ShowBasicData.R")
source(pathStr,encoding="utf-8")
# addBBands(n=20,sd=2,maType = "EMA")
# addEMA(n=20,col = "blue")
# addEMA(n=60,col = "purple")
# Analysis
#source("BasicData.R")
addBBands(n=20,sd=2,maType = "EMA")
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata/"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
# Download Basic Data
# source("GetCompanyList.R")
# get all company list
# stocknolist=c(companylist)
# stocknolist=c(companylist[1:length(companylist)])
# asign company list
# stocknolist=c("2330","2882")
# isDownloadData=TRUE
# source("DownloadBasicData.R")
# downloadData(stocknolist)
# Show Basic Data
stockno="2330"
pathStr=paste0(projectPathStr,"BasicData/ShowBasicData.R")
source(pathStr,encoding="utf-8")
# addBBands(n=20,sd=2,maType = "EMA")
# addEMA(n=20,col = "blue")
# addEMA(n=60,col = "purple")
# Analysis
#source("BasicData.R")
addBBands(n=20,sd=2,maType = "EMA")
rm(list=ls())
projectPathStr="C:/Users/alex1/Desktop/getTWSEdata/"
nowDateSplit=strsplit(as.character(Sys.Date()),"-")
nowDate=paste0(nowDateSplit[[1]][1],nowDateSplit[[1]][2],nowDateSplit[[1]][3])
startDate="20200101"
endDate=nowDate
encodingStr="utf-8"
baseDataPathStr=paste0(projectPathStr,"BasicData/ShowBasicData.R")
getCompanyPathStr=paste0(projectPathStr,"BasicData/GetCompanyList.R")
# Download Basic Data
source(getCompanyPathStr,encodingStr)
# Download Basic Data
source(getCompanyPathStr,encoding = encodingStr)
View(company)
