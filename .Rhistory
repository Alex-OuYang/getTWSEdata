library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180901"
source("datediff.R")
View(datediff)
date.length
datediff.length
datediff
typeof(datediff)
datediff=as.matrix(datediff)
datediff
typeof(datediff)
nrow(datediff)
for(i in nrow(datediff)){
print(i)
}
for(i in c(1:nrow(datediff))){
print(i)
}
for(i in c(1:nrow(datediff))){
print(datediff[i,])
}
setwd("C:/Users/alex1/Desktop/stock")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180901"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
print(datediff[i,])
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
STOCK
setwd("C:/Users/alex1/Desktop/stock")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180901"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
print(datediff[i,])
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
# stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datestr,"&stockNo=",stockno)
# urldata=url(stockurl)
# stock=fromJSON(urldata,flatten=T)
#
# STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK[,2]=as.numeric(STOCK[,2])#O
STOCK[,3]=as.numeric(STOCK[,3])#P
STOCK[,4]=as.numeric(STOCK[,4])#C
STOCK[,5]=as.numeric(STOCK[,5])#L
STOCK[,6]=as.numeric(gsub(",","",STOCK[,6]))#V
timeCharVector = as.character(STOCK[,1])
TimeY=substr(timeCharVector,1,3)
TimeY=as.numeric(TimeY)+1911
timeCharVector=paste0(TimeY,substr(timeCharVector,4,9))
timeVector=strptime(timeCharVector,"%Y/%m/%d",tz=Sys.timezone())
timeVector=as.POSIXct(timeVector)
STOCK=cbind(as.numeric(STOCK[,2]),as.numeric(STOCK[,3]),as.numeric(STOCK[,4]),as.numeric(STOCK[,5]),as.numeric(STOCK[,6]))
STOCK=xts(STOCK,as.POSIXct(timeVector))
colnames(STK)=c("Open","High","Low","Close","Volume")
setwd("C:/Users/alex1/Desktop/stock")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180901"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
print(datediff[i,])
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
# stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datestr,"&stockNo=",stockno)
# urldata=url(stockurl)
# stock=fromJSON(urldata,flatten=T)
#
# STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK[,2]=as.numeric(STOCK[,2])#O
STOCK[,3]=as.numeric(STOCK[,3])#P
STOCK[,4]=as.numeric(STOCK[,4])#C
STOCK[,5]=as.numeric(STOCK[,5])#L
STOCK[,6]=as.numeric(gsub(",","",STOCK[,6]))#V
timeCharVector = as.character(STOCK[,1])
TimeY=substr(timeCharVector,1,3)
TimeY=as.numeric(TimeY)+1911
timeCharVector=paste0(TimeY,substr(timeCharVector,4,9))
timeVector=strptime(timeCharVector,"%Y/%m/%d",tz=Sys.timezone())
timeVector=as.POSIXct(timeVector)
STOCK=cbind(as.numeric(STOCK[,2]),as.numeric(STOCK[,3]),as.numeric(STOCK[,4]),as.numeric(STOCK[,5]),as.numeric(STOCK[,6]))
STOCK=xts(STOCK,as.POSIXct(timeVector))
colnames(STOCK)=c("Open","High","Low","Close","Volume")
View(STK)
View(STOCK)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
setwd("C:/Users/alex1/Desktop/stock")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180101"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
print(datediff[i,])
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
# stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datestr,"&stockNo=",stockno)
# urldata=url(stockurl)
# stock=fromJSON(urldata,flatten=T)
#
# STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK[,2]=as.numeric(STOCK[,2])#O
STOCK[,3]=as.numeric(STOCK[,3])#P
STOCK[,4]=as.numeric(STOCK[,4])#C
STOCK[,5]=as.numeric(STOCK[,5])#L
STOCK[,6]=as.numeric(gsub(",","",STOCK[,6]))#V
timeCharVector = as.character(STOCK[,1])
TimeY=substr(timeCharVector,1,3)
TimeY=as.numeric(TimeY)+1911
timeCharVector=paste0(TimeY,substr(timeCharVector,4,9))
timeVector=strptime(timeCharVector,"%Y/%m/%d",tz=Sys.timezone())
timeVector=as.POSIXct(timeVector)
STOCK=cbind(as.numeric(STOCK[,2]),as.numeric(STOCK[,3]),as.numeric(STOCK[,4]),as.numeric(STOCK[,5]),as.numeric(STOCK[,6]))
STOCK=xts(STOCK,as.POSIXct(timeVector))
colnames(STOCK)=c("Open","High","Low","Close","Volume")
# View(STOCK)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
setwd("C:/Users/alex1/Desktop/stock")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180501"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
# stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datestr,"&stockNo=",stockno)
# urldata=url(stockurl)
# stock=fromJSON(urldata,flatten=T)
#
# STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK[,2]=as.numeric(STOCK[,2])#O
STOCK[,3]=as.numeric(STOCK[,3])#P
STOCK[,4]=as.numeric(STOCK[,4])#C
STOCK[,5]=as.numeric(STOCK[,5])#L
STOCK[,6]=as.numeric(gsub(",","",STOCK[,6]))#V
timeCharVector = as.character(STOCK[,1])
TimeY=substr(timeCharVector,1,3)
TimeY=as.numeric(TimeY)+1911
timeCharVector=paste0(TimeY,substr(timeCharVector,4,9))
timeVector=strptime(timeCharVector,"%Y/%m/%d",tz=Sys.timezone())
timeVector=as.POSIXct(timeVector)
STOCK=cbind(as.numeric(STOCK[,2]),as.numeric(STOCK[,3]),as.numeric(STOCK[,4]),as.numeric(STOCK[,5]),as.numeric(STOCK[,6]))
STOCK=xts(STOCK,as.POSIXct(timeVector))
colnames(STOCK)=c("Open","High","Low","Close","Volume")
# View(STOCK)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
View(STOCK)
SMA(STOCK,n=10)
?SMA
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
SMA(STOCK,n=10)
SMA(STOCK[,4],n=10)
Sys.setenv(TZ = "UTC")
SMA(STOCK[,4],n=10)
setwd("C:/Users/alex1/Desktop/stock")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180701"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
STOCK[,2]=as.numeric(STOCK[,2])#O
STOCK[,3]=as.numeric(STOCK[,3])#P
STOCK[,4]=as.numeric(STOCK[,4])#C
STOCK[,5]=as.numeric(STOCK[,5])#L
STOCK[,6]=as.numeric(gsub(",","",STOCK[,6]))#V
timeCharVector = as.character(STOCK[,1])
TimeY=substr(timeCharVector,1,3)
TimeY=as.numeric(TimeY)+1911
timeCharVector=paste0(TimeY,substr(timeCharVector,4,9))
timeVector=strptime(timeCharVector,"%Y/%m/%d",tz=Sys.timezone())
timeVector=as.POSIXct(timeVector)
STOCK=cbind(as.numeric(STOCK[,2]),as.numeric(STOCK[,3]),as.numeric(STOCK[,4]),as.numeric(STOCK[,5]),as.numeric(STOCK[,6]))
STOCK=xts(STOCK,as.POSIXct(timeVector))
colnames(STOCK)=c("Open","High","Low","Close","Volume")
# View(STOCK)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
SMA(STOCK[,4],n=10)
setwd("C:/Users/alex1/Desktop/getTWSEdata")
setwd("C:/Users/alex1/Desktop/getTWSEdata")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180701"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
STOCK[,2]=as.numeric(STOCK[,2])#O
STOCK[,3]=as.numeric(STOCK[,3])#P
STOCK[,4]=as.numeric(STOCK[,4])#C
STOCK[,5]=as.numeric(STOCK[,5])#L
STOCK[,6]=as.numeric(gsub(",","",STOCK[,6]))#V
timeCharVector = as.character(STOCK[,1])
TimeY=substr(timeCharVector,1,3)
TimeY=as.numeric(TimeY)+1911
timeCharVector=paste0(TimeY,substr(timeCharVector,4,9))
timeVector=strptime(timeCharVector,"%Y/%m/%d",tz=Sys.timezone())
timeVector=as.POSIXct(timeVector)
STOCK=cbind(as.numeric(STOCK[,2]),as.numeric(STOCK[,3]),as.numeric(STOCK[,4]),as.numeric(STOCK[,5]),as.numeric(STOCK[,6]))
STOCK=xts(STOCK,as.POSIXct(timeVector))
colnames(STOCK)=c("Open","High","Low","Close","Volume")
# View(STOCK)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
setwd("C:/Users/alex1/Desktop/getTWSEdata")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180101"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
STOCK[,2]=as.numeric(STOCK[,2])#O
STOCK[,3]=as.numeric(STOCK[,3])#P
STOCK[,4]=as.numeric(STOCK[,4])#C
STOCK[,5]=as.numeric(STOCK[,5])#L
STOCK[,6]=as.numeric(gsub(",","",STOCK[,6]))#V
timeCharVector = as.character(STOCK[,1])
TimeY=substr(timeCharVector,1,3)
TimeY=as.numeric(TimeY)+1911
timeCharVector=paste0(TimeY,substr(timeCharVector,4,9))
timeVector=strptime(timeCharVector,"%Y/%m/%d",tz=Sys.timezone())
timeVector=as.POSIXct(timeVector)
STOCK=cbind(as.numeric(STOCK[,2]),as.numeric(STOCK[,3]),as.numeric(STOCK[,4]),as.numeric(STOCK[,5]),as.numeric(STOCK[,6]))
STOCK=xts(STOCK,as.POSIXct(timeVector))
colnames(STOCK)=c("Open","High","Low","Close","Volume")
# View(STOCK)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
SMA()
SMA
?SMA
SMA(CL,n=10)
SMA(STOCK$Close,n=10)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
SMA(STOCK$Close,n=10)
Sys.timezone
Sys.timezone()
Sys.setenv(TZ = "UTC")
setwd("C:/Users/alex1/Desktop/getTWSEdata")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180101"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
STOCK[,2]=as.numeric(STOCK[,2])#O
STOCK[,3]=as.numeric(STOCK[,3])#P
STOCK[,4]=as.numeric(STOCK[,4])#C
STOCK[,5]=as.numeric(STOCK[,5])#L
STOCK[,6]=as.numeric(gsub(",","",STOCK[,6]))#V
Sys.setenv(TZ = "UTC")
timeCharVector = as.character(STOCK[,1])
TimeY=substr(timeCharVector,1,3)
TimeY=as.numeric(TimeY)+1911
timeCharVector=paste0(TimeY,substr(timeCharVector,4,9))
timeVector=strptime(timeCharVector,"%Y/%m/%d",tz=Sys.timezone())
timeVector=as.POSIXct(timeVector)
STOCK=cbind(as.numeric(STOCK[,2]),as.numeric(STOCK[,3]),as.numeric(STOCK[,4]),as.numeric(STOCK[,5]),as.numeric(STOCK[,6]))
STOCK=xts(STOCK,as.POSIXct(timeVector))
colnames(STOCK)=c("Open","High","Low","Close","Volume")
# View(STOCK)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
SMA(STOCK$Close,n=10)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
SMA(STOCK$Close,n=10)
addSMA()
add_BBands()
STOCK
add_BBands(Close)
?add_BBands
setwd("C:/Users/alex1/Desktop/getTWSEdata")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180101"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
STOCK[,2]=as.numeric(STOCK[,2])#O
STOCK[,3]=as.numeric(STOCK[,3])#P
STOCK[,4]=as.numeric(STOCK[,4])#C
STOCK[,5]=as.numeric(STOCK[,5])#L
STOCK[,6]=as.numeric(gsub(",","",STOCK[,6]))#V
Sys.setenv(TZ = "UTC")
timeCharVector = as.character(STOCK[,1])
TimeY=substr(timeCharVector,1,3)
TimeY=as.numeric(TimeY)+1911
timeCharVector=paste0(TimeY,substr(timeCharVector,4,9))
timeVector=strptime(timeCharVector,"%Y/%m/%d",tz=Sys.timezone())
timeVector=as.POSIXct(timeVector)
STOCK=cbind(as.numeric(STOCK[,2]),as.numeric(STOCK[,3]),as.numeric(STOCK[,4]),as.numeric(STOCK[,5]),as.numeric(STOCK[,6]))
STOCK=xts(STOCK,as.POSIXct(timeVector))
colnames(STOCK)=c("Open","High","Low","Close","Volume")
# View(STOCK)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
addSMA(n=10,col = "blue")
addSMA(n=20,col = "yellow")
setwd("C:/Users/alex1/Desktop/getTWSEdata")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180101"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
STOCK[,2]=as.numeric(STOCK[,2])#O
STOCK[,3]=as.numeric(STOCK[,3])#P
STOCK[,4]=as.numeric(STOCK[,4])#C
STOCK[,5]=as.numeric(STOCK[,5])#L
STOCK[,6]=as.numeric(gsub(",","",STOCK[,6]))#V
Sys.setenv(TZ = "UTC")
timeCharVector = as.character(STOCK[,1])
TimeY=substr(timeCharVector,1,3)
TimeY=as.numeric(TimeY)+1911
timeCharVector=paste0(TimeY,substr(timeCharVector,4,9))
timeVector=strptime(timeCharVector,"%Y/%m/%d",tz=Sys.timezone())
timeVector=as.POSIXct(timeVector)
STOCK=cbind(as.numeric(STOCK[,2]),as.numeric(STOCK[,3]),as.numeric(STOCK[,4]),as.numeric(STOCK[,5]),as.numeric(STOCK[,6]))
STOCK=xts(STOCK,as.POSIXct(timeVector))
colnames(STOCK)=c("Open","High","Low","Close","Volume")
# View(STOCK)
chartSeries(STOCK,up.col = "red",dn.col = "green",theme = "white",name = stockno)
addSMA(n=10,col = "blue")
addSMA(n=20,col = "gray")
addBBands()
setwd("C:/Users/alex1/Desktop/getTWSEdata")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180101"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
STOCK[,2]=as.numeric(STOCK[,2])#O
STOCK[,3]=as.numeric(STOCK[,3])#P
STOCK[,4]=as.numeric(STOCK[,4])#C
STOCK[,5]=as.numeric(STOCK[,5])#L
STOCK[,6]=as.numeric(gsub(",","",STOCK[,6]))#V
Sys.setenv(TZ = "UTC")
timeCharVector = as.character(STOCK[,1])
TimeY=substr(timeCharVector,1,3)
TimeY=as.numeric(TimeY)+1911
timeCharVector=paste0(TimeY,substr(timeCharVector,4,9))
timeVector=strptime(timeCharVector,"%Y/%m/%d",tz=Sys.timezone())
timeVector=as.POSIXct(timeVector)
STOCK=cbind(as.numeric(STOCK[,2]),as.numeric(STOCK[,3]),as.numeric(STOCK[,4]),as.numeric(STOCK[,5]),as.numeric(STOCK[,6]))
STOCK=xts(STOCK,as.POSIXct(timeVector))
colnames(STOCK)=c("Open","High","Low","Close","Volume")
View(stock)
View(STOCK)
Sys.time
Sys.time()
op <- options(digits.secs = 6)
Sys.time()
options(op)
format(Sys.time(), "%a %b %d %X %Y")
Sys.setenv(TZ = "UTC")
Sys.time()
?Sys.setenv
Sys.setenv(TZ = "Asia/taiwan")
Sys.setenv(TZ = "Asia/taiwan")
Sys.time()
Sys.time()+8
Sys.setenv(TZ = "UTC")
Sys.time()
Sys.timezone()
Sys.setenv(TZ = "Asia/Taipei")
Sys.time()
Sys.setenv(TZ = "Asia/Taipei")
Sys.time()
setwd("C:/Users/alex1/Desktop/getTWSEdata")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180101"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
for(i in c(1:nrow(datediff))){
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
stockurl
setwd("C:/Users/alex1/Desktop/getTWSEdata")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20180101"
source("datediff.R")
datediff=as.matrix(datediff)
STOCK=c()
View(datediff)
for(i in c(1:nrow(datediff))){
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
setwd("C:/Users/alex1/Desktop/getTWSEdata")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20181201"
source("datediff.R")
setwd("C:/Users/alex1/Desktop/getTWSEdata")
library(quantmod)
library(jsonlite)
stockno="2330"
datestr="20181201"
source("datediff.R")
STOCK=c()
for(i in c(1:nrow(datediff))){
stockurl=paste0("http://www.twse.com.tw/exchangeReport/STOCK_DAY?date=",datediff[i,],"&stockNo=",stockno)
urldata=url(stockurl)
stock=fromJSON(urldata,flatten=T)
STK=cbind(stock$data[,1],stock$data[,4],stock$data[,5],stock$data[,6],stock$data[,7],stock$data[,3])
STOCK=rbind(STOCK,STK)
}
